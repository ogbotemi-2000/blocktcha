!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.freighterApi=r():e.freighterApi=r()}(this,(()=>(()=>{"use strict";var e,r,E={d:(e,r)=>{for(var o in r)E.o(r,o)&&!E.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};E.r(o),E.d(o,{default:()=>I,getNetwork:()=>N,getNetworkDetails:()=>s,getPublicKey:()=>_,getUserInfo:()=>R,isAllowed:()=>C,isBrowser:()=>c,isConnected:()=>n,requestAccess:()=>i,setAllowed:()=>O,signAuthEntry:()=>S,signBlob:()=>A,signTransaction:()=>t}),function(e){e.CREATE_ACCOUNT="CREATE_ACCOUNT",e.FUND_ACCOUNT="FUND_ACCOUNT",e.ADD_ACCOUNT="ADD_ACCOUNT",e.IMPORT_ACCOUNT="IMPORT_ACCOUNT",e.IMPORT_HARDWARE_WALLET="IMPORT_HARDWARE_WALLET",e.LOAD_ACCOUNT="LOAD_ACCOUNT",e.MAKE_ACCOUNT_ACTIVE="MAKE_ACCOUNT_ACTIVE",e.UPDATE_ACCOUNT_NAME="UPDATE_ACCOUNT_NAME",e.GET_MNEMONIC_PHRASE="GET_MNEMONIC_PHRASE",e.CONFIRM_MNEMONIC_PHRASE="CONFIRM_MNEMONIC_PHRASE",e.CONFIRM_MIGRATED_MNEMONIC_PHRASE="CONFIRM_MIGRATED_MNEMONIC_PHRASE",e.RECOVER_ACCOUNT="RECOVER_ACCOUNT",e.CONFIRM_PASSWORD="CONFIRM_PASSWORD",e.REJECT_ACCESS="REJECT_ACCESS",e.GRANT_ACCESS="GRANT_ACCESS",e.SIGN_TRANSACTION="SIGN_TRANSACTION",e.SIGN_BLOB="SIGN_BLOB",e.SIGN_AUTH_ENTRY="SIGN_AUTH_ENTRY",e.HANDLE_SIGNED_HW_TRANSACTION="HANDLE_SIGNED_HW_TRANSACTION",e.REJECT_TRANSACTION="REJECT_TRANSACTION",e.SIGN_FREIGHTER_TRANSACTION="SIGN_FREIGHTER_TRANSACTION",e.SIGN_FREIGHTER_SOROBAN_TRANSACTION="SIGN_FREIGHTER_SOROBAN_TRANSACTION",e.ADD_RECENT_ADDRESS="ADD_RECENT_ADDRESS",e.LOAD_RECENT_ADDRESSES="LOAD_RECENT_ADDRESSES",e.SIGN_OUT="SIGN_OUT",e.SHOW_BACKUP_PHRASE="SHOW_BACKUP_PHRASE",e.SAVE_ALLOWLIST="SAVE_ALLOWLIST",e.SAVE_SETTINGS="SAVE_SETTINGS",e.LOAD_SETTINGS="LOAD_SETTINGS",e.GET_CACHED_ASSET_ICON="GET_CACHED_ASSET_ICON",e.CACHE_ASSET_ICON="CACHE_ASSET_ICON",e.GET_CACHED_ASSET_DOMAIN="GET_CACHED_ASSET_DOMAIN",e.CACHE_ASSET_DOMAIN="CACHE_ASSET_DOMAIN",e.GET_BLOCKED_ACCOUNTS="GET_BLOCKED_ACCOUNTS",e.GET_BLOCKED_DOMAINS="GET_BLOCKED_DOMAINS",e.ADD_CUSTOM_NETWORK="ADD_CUSTOM_NETWORK",e.CHANGE_NETWORK="CHANGE_NETWORK",e.REMOVE_CUSTOM_NETWORK="REMOVE_CUSTOM_NETWORK",e.EDIT_CUSTOM_NETWORK="EDIT_CUSTOM_NETWORK",e.RESET_EXP_DATA="RESET_EXP_DATA",e.ADD_TOKEN_ID="ADD_TOKEN_ID",e.GET_TOKEN_IDS="GET_TOKEN_IDS",e.REMOVE_TOKEN_ID="REMOVE_TOKEN_ID",e.GET_MIGRATABLE_ACCOUNTS="GET_MIGRATABLE_ACCOUNTS",e.GET_MIGRATED_MNEMONIC_PHRASE="GET_MIGRATED_MNEMONIC_PHRASE",e.MIGRATE_ACCOUNTS="MIGRATE_ACCOUNTS"}(e||(e={})),function(e){e.REQUEST_ACCESS="REQUEST_ACCESS",e.REQUEST_PUBLIC_KEY="REQUEST_PUBLIC_KEY",e.SUBMIT_TRANSACTION="SUBMIT_TRANSACTION",e.SUBMIT_BLOB="SUBMIT_BLOB",e.SUBMIT_AUTH_ENTRY="SUBMIT_AUTH_ENTRY",e.REQUEST_NETWORK="REQUEST_NETWORK",e.REQUEST_NETWORK_DETAILS="REQUEST_NETWORK_DETAILS",e.REQUEST_CONNECTION_STATUS="REQUEST_CONNECTION_STATUS",e.REQUEST_ALLOWED_STATUS="REQUEST_ALLOWED_STATUS",e.SET_ALLOWED_STATUS="SET_ALLOWED_STATUS",e.REQUEST_USER_INFO="REQUEST_USER_INFO"}(r||(r={}));const T=e=>{const E=Date.now()+Math.random();return window.postMessage({source:"FREIGHTER_EXTERNAL_MSG_REQUEST",messageId:E,...e},window.location.origin),new Promise((o=>{let T=0;e.type!==r.REQUEST_CONNECTION_STATUS&&e.type!==r.REQUEST_PUBLIC_KEY||(T=setTimeout((()=>{o({isConnected:!1,publicKey:""}),window.removeEventListener("message",_)}),2e3));const _=e=>{var r,t;e.source===window&&"FREIGHTER_EXTERNAL_MSG_RESPONSE"===(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.source)&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.messagedId)===E&&(o(e.data),window.removeEventListener("message",_),clearTimeout(T))};window.addEventListener("message",_,!1)}))},_=()=>c?(async()=>{let e={publicKey:"",error:""};try{e=await T({type:r.REQUEST_PUBLIC_KEY})}catch(e){console.error(e)}const{publicKey:E,error:o}=e;if(o)throw o;return E})():Promise.resolve(""),t=(e,E)=>c?(async(e,E,o)=>{let _="",t="",A="";"object"==typeof E?(_=E.network||"",t=E.accountToSign||"",A=E.networkPassphrase||""):(_=E||"",t="");let S={signedTransaction:"",error:""};try{S=await T({transactionXdr:e,network:_,networkPassphrase:A,accountToSign:t,type:r.SUBMIT_TRANSACTION})}catch(e){throw console.error(e),e}const{signedTransaction:n,error:N}=S;if(N)throw N;return n})(e,E):Promise.resolve(""),A=(e,E)=>c?(async(e,E)=>{let o={signedBlob:"",error:""};const _=(E||{}).accountToSign||"";try{o=await T({blob:e,accountToSign:_,type:r.SUBMIT_BLOB})}catch(e){throw console.error(e),e}const{signedBlob:t,error:A}=o;if(A)throw A;return t})(e,E):Promise.resolve(""),S=(e,E)=>c?(async(e,E)=>{let o={signedAuthEntry:"",error:""};const _=(E||{}).accountToSign||"";try{o=await T({entryXdr:e,accountToSign:_,type:r.SUBMIT_AUTH_ENTRY})}catch(e){console.error(e)}const{signedAuthEntry:t,error:A}=o;if(A)throw A;return t})(e,E):Promise.resolve(""),n=()=>c?window.freighter?Promise.resolve(window.freighter):(async()=>{let e={isConnected:!1};try{e=await T({type:r.REQUEST_CONNECTION_STATUS})}catch(e){console.error(e)}return e.isConnected})():Promise.resolve(!1),N=()=>c?(async()=>{let e={network:"",error:""};try{e=await T({type:r.REQUEST_NETWORK})}catch(e){console.error(e)}const{network:E,error:o}=e;if(o)throw o;return E})():Promise.resolve(""),s=()=>c?(async()=>{let e={networkDetails:{network:"",networkName:"",networkUrl:"",networkPassphrase:"",sorobanRpcUrl:void 0},error:""};try{e=await T({type:r.REQUEST_NETWORK_DETAILS})}catch(e){console.error(e)}const{networkDetails:E,error:o}=e,{network:_,networkUrl:t,networkPassphrase:A,sorobanRpcUrl:S}=E;if(o)throw o;return{network:_,networkUrl:t,networkPassphrase:A,sorobanRpcUrl:S}})():Promise.resolve({network:"",networkUrl:"",networkPassphrase:"",sorobanRpcUrl:""}),C=()=>c?(async()=>{let e={isAllowed:!1};try{e=await T({type:r.REQUEST_ALLOWED_STATUS})}catch(e){console.error(e)}return e.isAllowed})():Promise.resolve(!1),O=()=>c?(async()=>{let e={isAllowed:!1,error:""};try{e=await T({type:r.SET_ALLOWED_STATUS})}catch(e){console.error(e)}const{isAllowed:E,error:o}=e;if(o)throw o;return E})():Promise.resolve(!1),R=()=>c?(async()=>{let e={userInfo:{publicKey:""},error:""};try{e=await T({type:r.REQUEST_USER_INFO})}catch(e){console.error(e)}const{userInfo:E,error:o}=e;if(o)throw o;return E})():Promise.resolve({publicKey:""}),i=()=>c?(async()=>{let e={publicKey:"",error:""};try{e=await T({type:r.REQUEST_ACCESS})}catch(e){console.error(e)}const{publicKey:E,error:o}=e;if(o)throw o;return E})():Promise.resolve(""),c="undefined"!=typeof window,I={getPublicKey:_,signTransaction:t,signBlob:A,signAuthEntry:S,isConnected:n,getNetwork:N,getNetworkDetails:s,isAllowed:C,setAllowed:O,getUserInfo:R,requestAccess:i};return o})()));
//# sourceMappingURL=index.min.js.map